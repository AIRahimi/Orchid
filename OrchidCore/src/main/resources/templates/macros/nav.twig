
{%- macro createTypedLink(linkType, link, children, displayName) -%}
    {% import 'macros/nav.twig' as _nav_ %}

    {% if not empty(linkType) %}
        {%- if children and (length(children) > 0) -%}
            {# We have children, so display the link and its children #}
            {% if displayName %}
                {%- include [concat('includes/nav/parent-', linkType, '.twig'), "includes/nav/parent.twig"] with { parent: { name: displayName }, children: children } -%}
            {% elseif not link.name and link.type %}
                {%- include [concat('includes/nav/parent-', linkType, '.twig'), "includes/nav/parent.twig"] with { parent: { name: link.type }, children: children } -%}
            {% else %}
                {%- include [concat('includes/nav/parent-', linkType, '.twig'), "includes/nav/parent.twig"] with { parent: link, children: children } -%}
            {% endif %}
        {%- else -%}
            {# We are a child, so display it alone #}
            {%- include [concat('includes/nav/child-', linkType, '.twig'), "includes/nav/child.twig"] with { link: link } -%}
        {%- endif -%}
    {% else %}
        {%- if children and (length(children) > 0) -%}
            {# We have children, so display the link and its children #}
            {% if displayName %}
                {%- include "includes/nav/parent.twig" with { parent: { name: displayName }, children: children } -%}
            {% elseif not link.name and link.type %}
                {%- include "includes/nav/parent.twig" with { parent: { name: link.type }, children: children } -%}
            {% else %}
                {%- include "includes/nav/parent.twig" with { parent: link, children: children } -%}
            {% endif %}
        {%- else -%}
            {# We are a child, so display it alone #}
            {%- include "includes/nav/child.twig" with { link: link } -%}
        {%- endif -%}
    {% endif %}
{%- endmacro -%}

{%- macro createSiteLink(link, children, displayName) -%}
    {% import 'macros/nav.twig' as _nav_ %}

    {{- _nav_.createTypedLink('site', link, children, displayName) -}}
{%- endmacro -%}

{%- macro createPageLink(link, children, displayName) -%}
    {% import 'macros/nav.twig' as _nav_ %}

    {{- _nav_.createTypedLink('page', link, children, displayName) -}}
{%- endmacro -%}

{%- macro createLink(link, children, displayName) -%}
    {% import 'macros/nav.twig' as _nav_ %}

    {{- _nav_.createTypedLink('', link, children, displayName) -}}
{%- endmacro -%}
