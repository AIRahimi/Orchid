// Configure build, dependencies, output jar, and Java compatibility
//------------------------------------------------------------------------------

plugins {
    id 'java'
    id 'com.eden.orchidplugin' version 'v0.1.6'
}

sourceCompatibility = '1.8'
targetCompatibility = '1.8'

dependencies {
    compile files(org.gradle.internal.jvm.Jvm.current().toolsJar)
    compile project(":core")
    compile 'org.jsoup:jsoup:1.10.2'

    orchidDocsCompile project(":themes:BsDoc")
    orchidDocsCompile project(":plugins:Wiki")
}

// Javadoc Generation
//------------------------------------------------------------------------------
orchid {
    includeMainConfiguration = true
    task = 'listOptions'

    theme = 'com.eden.orchid.bsdoc.BSDocTheme'
    version = this.version
    baseUrl = 'https://javaeden.github.io/OrchidWiki'
}

task sourcesJar(type: Jar, dependsOn: classes) {
    classifier = 'sources'
    from sourceSets.main.allSource
}

task javadocJar(type: Jar, dependsOn: javadoc) {
    classifier = 'javadoc'
    from javadoc.destinationDir
}

artifacts {
    archives sourcesJar
    archives javadocJar
}

tasks.jar {
    dependsOn ':core:jar', ':themes:BsDoc:jar'
}