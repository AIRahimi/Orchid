// Configure build, dependencies, output jar, and Java compatibility
//------------------------------------------------------------------------------

plugins {
    id 'java'
    id 'com.eden.orchidplugin' version 'v0.1.6'
}

sourceCompatibility = '1.8'
targetCompatibility = '1.8'

dependencies {
    compile files(org.gradle.internal.jvm.Jvm.current().toolsJar)
    compile project(":core")

    orchidDocsCompile project(":themes:BsDoc")
    orchidDocsCompile project(":plugins:Pages")
}

orchid {
    includeMainConfiguration = true
    task = 'watch'

    theme = 'com.eden.orchid.bsdoc.BSDocTheme'
    version = this.version
    baseUrl = 'https://javaeden.github.io/OrchidPages'
}

task sourcesJar(type: Jar, dependsOn: classes) {
    classifier = 'sources'
    from sourceSets.main.allSource
}

task javadocJar(type: Jar, dependsOn: javadoc) {
    classifier = 'javadoc'
    from javadoc.destinationDir
}

artifacts {
    archives sourcesJar
    archives javadocJar
}

tasks.jar {
    dependsOn ':core:jar', ':themes:BsDoc:jar'
}